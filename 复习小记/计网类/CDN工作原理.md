## CDN工作原理

宕机：计算机发生故障，无法正常工作‘’

CDN（内容分发网络）

### CDN的机制和现在电商的那种前置仓自营仓库是差不多的，比如京东自营。先把合作商家的货屯各个地点在通过最近的仓库给用户发送货物就能减少货运时间，CDN就像这种方式，让距离用户最近的服务器给用户发送资源以此就能达到加速网页打开的效果。



**CDN可以避免原服务器宕机情况下，CDN缓存服务器中仍然能正常工作**



当给一个域名设置了CDN，要先给域名的DNS解析设置的后台添加一条CDN专用的解析记录，这条记录会让域名被解析时候指向一个CDN网络专用的处理DNS请求服务器中，这个专门的CDN网络专用DNS服务器会给浏览器返回一台CDN负载均衡服务器，我们的设备就会去访问这个负载均衡服务器，然后这个负载均衡服务器就会返回我们一个对我们当前需求将良好的（距离近或者用量少）CDN服务的IP地址，然后我们设备会根据这个IP地址去这个CDN服务器去向他请求我们想要网站的网站资源。

问题1：网站资源一般是放在自己网站的服务器上面的并没有放在这个CDN服务器上的。

当我们在为源站IP地址开启了CDN服务后，就会把资源放在自己的服务器上。如果我们此时请求的这个CDN服务器上没有这个源站IP的资源那么他就会去CDN网络中的上层缓存服务器中去拉取，以此向上找，直至源站。

拉取回来文件之后会在之前每一次向上来取的缓存服务器上做一个缓存，最后我们的设备就能访问到所需网站的资源了。

通过CDN这种缓存机制，如果其他设备也需要访问该网站，他就可以去有这个网站缓存的服务器直接访问资源不用每次都去源站，这就是CDN的基本机制了。

CDN这种方式还能避免因为源站服务器宕机而导致的服务瘫痪

