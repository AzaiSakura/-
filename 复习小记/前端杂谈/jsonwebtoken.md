## JWT

JWT就主要分为三个部分：

```js
//Header 头部
{
    "alg":"HS256",
        "typ":"JWT"
}
//PayLoad 负载
{
    "sub":"1234567890",
        "name":"achacha",
            "iat":123456,
}
//签名 签名就是对头部和负载两个部分进行签名，签名中一定要定义密钥
HMACSHA256{
    base64UrlEncode(header) + "." + 
        base64UrlEncode(payload),
        这里是服务器的私钥
} secret base64 encoded

```

### JWT的原理

服务器认证以后，生成一个JSON格式的对象，发回给客户端，比如下面的这段json格式。

{undefined

"用户名": "admin",

"角色": "超级管理员",

"到期时间": "2020-07-13 00:00:00"

}

以后客户端与服务端通信的时候，都要发回这个 JSON 对象。服务器靠这个json对象认定用户的身份。

为了防止用户篡改数据，服务器在生成这个对象的时候，会加上签名，显得更加安全。

这个时候的服务器不再保存任何 session 数据，也就是服务器变成无状态了，从而比较容易实现扩展。


### JWT特点：

JWT不仅可用于验证，也可以用于信息交换，有效使用JWT可以降低服务器查询数据库的次数。

JWT最大的缺点：在于由于服务器不保存session状态，因此无法使用过程中某个废止的token，或者修改其权限。也就是说，jwt一旦签发了，在到期之前始终有效，除非服务器部署额外逻辑。

JWT本身包含了认证信息，一旦泄露任何人都可以获得令牌的所有权限，为了减少盗用。JWT的有效期应该设置的比较短，对于某些比较重要的权限，使用时应该再次对用户进行认证。

为了减少盗用，JWT建议使用HTTPS传输

